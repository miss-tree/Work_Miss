webpackJsonp([46],{"4TYy":function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=s("jMFT"),a=s("i889"),r={data:function(){return{topLayer:!1,curIndex:0,RETURNTYPE:"",ORDERCUSTOMERINFOR:{name:"平安医疗健康管理股份有限公司",person:"枭龙",ticketDate:"2019-07-19",ticketCom:"泰恩康股份",ticketNum:"TEK20190719"},SELECTPART:"市场部",ISRETURN:"",TICKETTYPE:"原发票",RETURNTICKET:"退货退票",RETURNWHY:"自提发现破损",returnReason:["近效期","自提发现破损","入库后破损","转仓","其他"],companyArr:["泰恩康股份","马鞍山天福康","电商公司","安徽维泰利"],ORDER:[{name:"红花油",num:2,price:5,money:"",M_num:"",M_money:"",unit:"件"},{name:"和胃",num:30,price:150,money:"5",M_num:1e3,M_money:1e3,unit:"件"}],editOrder:{name:"红",num:12,price:6,money:"",M_num:"",M_money:"",unit:"件",index:""},RETURNORDER:[{name:"红花油",num:2,returnNum:3,price:5,money:10,m_number:"",m_money:"",unit:"件",index:""}],selectPro:"",editReturn:{name:this.selectPro,num:"",returnNum:"",price:"",money:"",m_number:"",m_money:"",unit:"",index:""},BZ:"",EXAMINFOR:[{progress:"总监审核",opinion:"驳回",bz:"明细不清",time:"2018-04-03 16:50"},{progress:"复审",opinion:"驳回",bz:"明细不清明细不清明细不清明细不清",time:"2018-04-03 16:23"},{progress:"人资审核",opinion:"同意",bz:"明细不清",time:"2018-04-02 09:16"},{progress:"提交申请",opinion:"",bz:"",time:"2018-04-01 20:42"}]}},components:{listdetail:i.a,addreturn:a.a},watch:{ISRETURN:function(t,e){"否"==t&&(this.curIndex=0)}},computed:{proList:function(){return this.ORDER.map(function(t){return{text:t.name}})}},mounted:function(){},methods:{applyAjax:function(){var t=this;axios.get(api).then(function(e){t.ORDERCUSTOMERINFOR=e.data.data})}}},n={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[t._m(0),t._v(" "),s("div",{staticClass:"mui-content"},[s("div",{staticClass:"formTable"},[s("div",{staticClass:"form_div"},[s("div",{staticClass:"form_row"},[t._m(1),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.ORDERCUSTOMERINFOR.name))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(2),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.ORDERCUSTOMERINFOR.ticketCom))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(3),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.ORDERCUSTOMERINFOR.ticketNum))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(4),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.ORDERCUSTOMERINFOR.ticketDate))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(5),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.SELECTPART))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(6),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.TICKETTYPE))])]),t._v(" "),s("div",[s("div",{staticClass:"form_row"},[t._m(7),t._v(" "),s("div",{staticClass:"form_row_right"},[s("label",{attrs:{for:"isPlay"},on:{click:function(e){t.curIndex=1}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.ISRETURN,expression:"ISRETURN"}],staticClass:"myRadio",attrs:{type:"radio",value:"是",name:"ISRETURN",id:"isPlay"},domProps:{checked:t._q(t.ISRETURN,"是")},on:{change:function(e){t.ISRETURN="是"}}}),t._v("\n                  是\n                ")]),t._v(" "),s("label",{attrs:{for:"noPlay"},on:{click:function(e){t.curIndex=0}}},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.ISRETURN,expression:"ISRETURN"}],staticClass:"myRadio",attrs:{type:"radio",value:"否",name:"ISRETURN",id:"noPlay"},domProps:{checked:t._q(t.ISRETURN,"否")},on:{change:function(e){t.ISRETURN="否"}}}),t._v("\n                  否\n                ")])])])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(8),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.RETURNTICKET))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(9),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.RETURNWHY))])])]),t._v(" "),s("div",[s("div",{staticClass:"tabHead"},[s("div",{class:{active:0==t.curIndex},on:{click:function(e){t.curIndex=0}}},[s("span",[t._v("订单详情")])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"是"==t.ISRETURN,expression:"ISRETURN=='是'"}],class:{active:1==t.curIndex},on:{click:function(e){t.curIndex=1}}},[s("span",[t._v("退货产品")])])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:0==t.curIndex,expression:"curIndex==0"}]},[s("listdetail",{attrs:{ORDER:t.ORDER}})],1),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:"是"==t.ISRETURN,expression:"ISRETURN=='是'"}]},[s("div",{directives:[{name:"show",rawName:"v-show",value:1==t.curIndex,expression:"curIndex==1"}]},[s("listdetail",{attrs:{ORDER:t.RETURNORDER}})],1)])]),t._v(" "),s("div",{staticClass:"form_title"},[t._v("备注")]),t._v(" "),s("div",{staticClass:"form_div"},[t._m(10),t._v(" "),s("div",{staticClass:"padding-lr padding_bb"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.BZ,expression:"BZ"}],staticClass:"textarea",attrs:{name:"",rows:"1",cols:"38",placeholder:"请输入订单备注"},domProps:{value:t.BZ},on:{input:function(e){e.target.composing||(t.BZ=e.target.value)}}})])]),t._v(" "),s("div",{staticClass:"form_title"},[t._v("\n\t    \t审核进度\n\t    ")]),t._v(" "),s("time-line",{attrs:{examInfor:t.EXAMINFOR}})],1)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("header",{staticClass:"mui-bar mui-bar-nav back_title"},[e("a",{staticClass:"mui-action-back mui-icon mui-icon-left-nav mui-pull-left"}),this._v(" "),e("h1",{staticClass:"mui-title"},[this._v("订单退货")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{id:"CLIENT"}},[this._v("\n              客户名称\n              "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{id:"CLIENT"}},[this._v("\n              开票公司\n              "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{id:"CLIENT"}},[this._v("\n              发票号码\n              "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise"},[this._v("\n              开票日期\n              "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{id:"CLIENT"}},[this._v("\n              部门\n              "),e("span",{staticClass:"span_red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{id:"section"}},[this._v("\n              发票类型\n              "),e("span",{staticClass:"span_red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{id:"CLIENT"}},[this._v("\n                是否退货\n                "),e("span",{staticClass:"span_red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:"",id:"expressnumber"}},[this._v("\n              退票类型\n              "),e("span",{staticClass:"span_red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:"",id:"expressnumber"}},[this._v("\n              退货原因\n              "),e("span",{staticClass:"span_red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"padding-lr"},[e("span",{staticClass:"form_row_height huise"},[this._v("\n              备注\n              "),e("span",{staticClass:"span_red"})])])}]},c=s("VU/8")(r,n,!1,null,null,null);e.default=c.exports},i889:function(t,e,s){"use strict";s("z7gM");function i(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var a={data:function(){var t;return i(t={topLayer:!1,returnShow:!1,checkData:[],allCheck:!1,selectPro:"",isEditReturn:!1,editShow:!1},"isEditReturn",!1),i(t,"editReturn",{name:this.selectPro,num:"",returnNum:"",price:"",money:"",m_number:"",m_money:"",unit:"",index:""}),t},props:["RETURNORDER","ORDER","proList"],watch:{selectPro:function(t,e){var s=this;""!=t&&this.ORDER.forEach(function(e,i){e.NAME==t&&(s.editReturn.name=s.ORDER[i].NAME,s.editReturn.unit=s.ORDER[i].UNIT,s.editReturn.price=s.ORDER[i].PRICE,s.editReturn.num=s.ORDER[i].NUMBER)})},checkData:function(){this.checkData.length==this.RETURNORDER.length?this.allCheck=!0:this.allCheck=!1},deep:!0},computed:{returnTotal:function(){return 0==this.RETURNORDER.length?0:this.RETURNORDER.map(function(t){return t.money}).reduce(function(t,e){return parseFloat(e)+t})}},mounted:function(){var t=this;$("#proSelect").selectFilter({callBack:function(e){$("#proSelect input").val(e),$("#proSelect input")[0].dispatchEvent(new Event("input")),t.editReturn.name=e}})},methods:{closeAlert:function(){this.topLayer=!1,this.returnShow=!1},returnAdd:function(){this.topLayer=!this.topLayer,this.returnShow=!this.returnShow,this.editReturn={name:"",num:"",returnNum:"",price:"",money:"",m_number:"",m_money:"",unit:"",index:""}},delReturn:function(){var t=this;if(0==this.checkData.length)return!1;mui.confirm("你确定要删除订单","提示",["取消","确定 "],function(e){1==e.index&&t.RETURNORDER.forEach(function(e,s){-1!=t.checkData.indexOf(e.name)&&(t.checkData=t.checkData.filter(function(t){return t!=e.name}),t.RETURNORDER.splice(s,1))})})},changeReturn:function(){var t=this;if(0==this.checkData.length)return!1;this.isEditReturn=!0,this.RETURNORDER.forEach(function(e,s){-1!=e.name.indexOf(t.checkData[0])&&(t.editReturn=t.RETURNORDER[s],t.editReturn.index=s,t.selectPro=t.editReturn.name)}),this.topLayer=!0,this.returnShow=!0},saveReturn:function(){var t=this.editReturn.index;this.RETURNORDER[t]=this.editReturn,this.editReturn={name:"",num:"",returnNum:"",price:"",money:"",m_number:"",m_money:"",unit:"",index:""},this.topLayer=!1,this.returnShow=!1,this.isEditReturn=!1},checkAll:function(){var t=this;return this.allCheck=!this.allCheck,(this.allCheck=!1)?(this.checkData=[],!1):(this.checkData=[],this.RETURNORDER.forEach(function(e,s){t.checkData.push(e.NAME)}),!1)},keepReturn:function(){var t=this;return""==this.editReturn.name?(mui.alert("请选择产品名称"),!1):""==this.editReturn.returnNum?(mui.alert("请输入退货数量"),!1):void(0==this.RETURNORDER.length?(this.RETURNORDER.push(this.editReturn),this.selectPro="",this.topLayer=!1,this.returnShow=!1):this.RETURNORDER.forEach(function(e,s){if(console.log("hi"),e.name==t.editReturn.name)return mui.alert("此产品已经退货，请重新选择"),!1;t.RETURNORDER.push(t.editReturn),t.selectPro="",t.editReturn={name:"",num:"",returnNum:"",price:"",money:"",m_number:"",m_money:"",unit:"",index:""},t.topLayer=!1,t.returnShow=!1}))}}},r={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.topLayer,expression:"topLayer"}],staticClass:"mongolia",on:{click:t.closeAlert}}),t._v(" "),s("div",{staticClass:"form_div"},[s("div",{staticClass:"form_row"},[t._m(0),t._v(" "),s("div",{staticClass:"form_row_right"},[s("div",{staticClass:"mui-btn mui-btn-primary",on:{click:function(e){t.returnAdd()}}},[t._v("添加")]),t._v(" "),s("button",{staticClass:"mui-btn",attrs:{type:"button"},on:{click:function(e){t.delReturn()}}},[t._v("删除")]),t._v(" "),s("span",{staticClass:"mui-btn mui-btn-success",on:{click:function(e){t.changeReturn()}}},[t._v("编辑")])])]),t._v(" "),s("table",{staticClass:"dataTable",attrs:{border:"0",cellspacing:"",cellpadding:""}},[s("tr",[s("th",{staticClass:"col_10"},[s("label",{staticClass:"bui-checkbox-label bui-checkbox-anim"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.allCheck,expression:"allCheck"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.allCheck)?t._i(t.allCheck,null)>-1:t.allCheck},on:{click:t.checkAll,change:function(e){var s=t.allCheck,i=e.target,a=!!i.checked;if(Array.isArray(s)){var r=t._i(s,null);i.checked?r<0&&(t.allCheck=s.concat([null])):r>-1&&(t.allCheck=s.slice(0,r).concat(s.slice(r+1)))}else t.allCheck=a}}}),t._v(" "),s("i",{staticClass:"bui-checkbox"})])]),t._v(" "),s("th",{staticClass:"col_40"},[t._v("产品名称")]),t._v(" "),s("th",{staticClass:"col_20"},[t._v("退货数量")]),t._v(" "),s("th",{staticClass:"col_15"},[t._v("单价")]),t._v(" "),s("th",{staticClass:"col_15"},[t._v("金额")])]),t._v(" "),t._l(t.RETURNORDER,function(e,i){return s("tr",[s("td",{staticClass:"col_10"},[s("label",{staticClass:"bui-checkbox-label bui-checkbox-anim"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.checkData,expression:"checkData"}],attrs:{type:"checkbox",name:"isCheck"},domProps:{value:e.name,checked:Array.isArray(t.checkData)?t._i(t.checkData,e.name)>-1:t.checkData},on:{change:function(s){var i=t.checkData,a=s.target,r=!!a.checked;if(Array.isArray(i)){var n=e.name,c=t._i(i,n);a.checked?c<0&&(t.checkData=i.concat([n])):c>-1&&(t.checkData=i.slice(0,c).concat(i.slice(c+1)))}else t.checkData=r}}}),t._v(" "),s("i",{staticClass:"bui-checkbox"})])]),t._v(" "),s("td",{staticClass:"col_40"},[s("span",[t._v(t._s(e.name))])]),t._v(" "),s("td",{staticClass:"col_20 text_algin"},[s("span",[t._v(t._s(e.returnNum))])]),t._v(" "),s("td",{staticClass:"col_15 text_algin"},[s("span",[t._v(t._s(e.price))])]),t._v(" "),s("td",{staticClass:"col_15 text_algin"},[s("span",[t._v(t._s(e.money))])])])})],2),t._v(" "),s("div",{staticClass:"form_row"},[t._m(1),t._v(" "),s("div",{staticClass:"form_row_right span_red"},[t._v(t._s(t.returnTotal))])]),t._v(" "),s("div",{directives:[{name:"show",rawName:"v-show",value:t.returnShow,expression:"returnShow"}],staticClass:"alert_div"},[s("div",[s("div",{staticClass:"form_title"},[t._v("产品退货")]),t._v(" "),s("div",{staticClass:"content"},[s("div",{staticClass:"formTable"},[s("div",{staticClass:"form_div"},[s("div",{staticClass:"form_row"},[t._m(2),t._v(" "),s("div",{staticClass:"filter-box form_row_right",attrs:{id:"proSelect"}},[s("div",{staticClass:"filter-text"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.selectPro,expression:"selectPro"}],staticClass:"filter-title",attrs:{type:"text",readonly:"",placeholder:"请选择"},domProps:{value:t.selectPro},on:{input:function(e){e.target.composing||(t.selectPro=e.target.value)}}}),t._v(" "),s("i",{staticClass:"icon icon-filter-arrow"})]),t._v(" "),t._l(t.proList,function(e,i){return s("select",{attrs:{name:"filter"}},[s("option",[t._v(t._s(e.text))])])})],2)]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(3),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.editReturn.returnNum,expression:"editReturn.returnNum"}],staticClass:"form_row_right",attrs:{type:"number",pattern:"[0-9]*",placeholder:"0"},domProps:{value:t.editReturn.returnNum},on:{input:function(e){e.target.composing||t.$set(t.editReturn,"returnNum",e.target.value)}}})]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(4),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.editReturn.unit))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(5),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.editReturn.price))])]),t._v(" "),s("div",{staticClass:"form_row"},[t._m(6),t._v(" "),s("div",{staticClass:"form_row_right"},[t._v(t._s(t.editReturn.money=t.editReturn.returnNum*t.editReturn.price))])])])])]),t._v(" "),s("div",{staticClass:"alertMidBottom"},[s("button",{directives:[{name:"show",rawName:"v-show",value:1==t.isEditReturn,expression:"isEditReturn==true"}],staticClass:"mui-btn mui-btn-block mui-btn-primary alertBtn",on:{click:function(e){t.saveReturn()}}},[t._v("保存编辑")]),t._v(" "),s("button",{directives:[{name:"show",rawName:"v-show",value:0==t.isEditReturn,expression:"isEditReturn==false"}],staticClass:"mui-btn mui-btn-block mui-btn-primary alertBtn",on:{click:function(e){t.keepReturn()}}},[t._v("添加")])])])])])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n        退货列表\n        "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n        金额合计\n        "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n                  产品名称\n                  "),e("span",{staticClass:"span_red"},[this._v("*")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n                  退货数量\n                  "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n                  单位\n                  "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n                  单价\n                  "),e("span",{staticClass:"span_red"})])},function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"form_row_left huise",attrs:{for:""}},[this._v("\n                  金额\n                  "),e("span",{staticClass:"span_red"})])}]},n=s("VU/8")(a,r,!1,null,null,null);e.a=n.exports}});